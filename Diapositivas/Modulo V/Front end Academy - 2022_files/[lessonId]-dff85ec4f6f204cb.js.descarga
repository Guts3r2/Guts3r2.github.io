(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3318],{66624:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/courses/[courseId]/lessons/[lessonId]",function(){return n(23040)}])},20843:function(e,t,n){"use strict";n.r(t),n.d(t,{ContainerLayout:function(){return y},Layout:function(){return T}});var r=n(7297),s=n(85893),i=n(37355),o=n(19305),a=n(37138),l=n(5152),u=n.n(l),c=n(67294),d=n(76248),f=n(86282);let m=e=>{let{disableProjectFinal:t}=e;return[{label:"Academias",path:"/academies"},{label:"Proyectos finales",disable:t,path:"/students",subRoutes:[{label:"Estados del proyecto",path:"assessments"}]}]};var E=n(9467);let S=e=>{let{contentsSubRoutes:t}=e;return[{label:"Contenidos",path:"/contents",subRoutes:t,disable:!0},{label:"Proyectos finales",path:"/tutors",subRoutes:[{label:"Sin asignar",path:"assessments",query:{status:E.T9.UNASSIGNED}},{label:"Correcci\xf3n en progreso",path:"assessments",query:{status:E.T9.IN_REVIEW}},{label:"Aprobados",path:"assessments",query:{status:E.T9.APPROVAL}},{label:"Desaprobados",path:"assessments",query:{status:E.T9.DISAPPROVAL}}]}]};var p=n(82694),v=n(83940);let g=()=>{var e;let{routes:t,setRoutes:n}=(0,v.F)(e=>({setRoutes:e.setRoutes,routes:e.settings.layout.routes}),d.Z),{roles:r,assessment_disable:s}=(0,p.c)(t=>{var n,r;return{roles:null!==(e=null===(n=t.institutionSelected)||void 0===n?void 0:n.roles)&&void 0!==e?e:[],assessment_disable:null===(r=t.institutionSelected)||void 0===r?void 0:r.assessment_disable}},d.Z),i=(0,c.useMemo)(()=>[{role:E.uU.STUDENT,routes:m({disableProjectFinal:!!s})},{role:E.uU.TEACHER,routes:S({contentsSubRoutes:[]})}],[s]);return(0,c.useEffect)(()=>{let e=i.filter(e=>{let{role:t}=e;return r.includes(t)}).map(e=>{let{routes:t}=e;return t}).flatMap(e=>e);JSON.stringify(e)!==JSON.stringify(t)&&n(e)},[i,r,t,n]),{routes:t}};var b=n(34217);function h(){let e=(0,r.Z)(["\n    background-color: ",";\n    padding: 0 20px 30px 20px;\n    min-height: 100vh;\n    min-width: 100%;\n  "]);return h=function(){return e},e}let P=u()(()=>Promise.all([n.e(3851),n.e(6505),n.e(8480),n.e(9611),n.e(372),n.e(2066)]).then(n.bind(n,16471)),{loadableGenerated:{webpack:()=>[16471]},ssr:!1,suspense:!1}),y=(0,c.memo)((0,i.Z)(o.Z)(h(),b.rS.palette.dark.light)),I=e=>{var t,n,r;let{hideSidebar:i,children:o}=e,{account:l}=(0,p.c)(e=>({account:e.account}),d.Z),{settings:{layout:{sidebarOpen:u}}}=(0,v.F)(e=>({settings:e.settings}),d.Z),{routes:c}=g(),m=null===(n=null==l?void 0:null===(t=l.institutions)||void 0===t?void 0:t.find(e=>e))||void 0===n?void 0:null===(r=n.roles)||void 0===r?void 0:r.includes(f.u.STUDENT);return(0,s.jsxs)(a.ZP,{container:!0,justifyContent:"space-between",children:[(0,s.jsx)(a.ZP,{item:!0,component:"nav",children:l&&(0,s.jsx)(P,{isStudent:m,sideBarCollapsed:i||!u,routes:c})}),(0,s.jsx)(a.ZP,{item:!0,component:"main",bgcolor:b.rS.palette.tone.white,borderRadius:2,minHeight:"calc(100vh - 86px)",display:"flex",flexDirection:"column",width:i||!u?"100%":"calc(100% - 228px)",children:o})]})},T=(0,c.memo)(I)},54666:function(e,t,n){"use strict";var r=n(7297),s=n(85893),i=n(37355),o=n(90149),a=n(93789),l=n(67294),u=n(34217);function c(){let e=(0,r.Z)(["\n  color: ",";\n  margin-bottom: 4px;\n"]);return c=function(){return e},e}function d(){let e=(0,r.Z)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n"]);return d=function(){return e},e}function f(){let e=(0,r.Z)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  flex: 1;\n"]);return f=function(){return e},e}let m=(0,i.Z)(o.Z)(c(),u.rS.palette.secondary.main),E=(0,i.Z)(a.Z)(d()),S=(0,i.Z)(a.Z)(f()),p=()=>(0,s.jsx)(S,{children:(0,s.jsxs)(E,{children:[(0,s.jsx)(m,{}),"Cargando..."]})});t.Z=(0,l.memo)(p)},71263:function(e,t,n){"use strict";var r=n(36559),s=n.n(r);let i=s()();t.Z=i},64773:function(e,t,n){"use strict";n.d(t,{Pg:function(){return a},dd:function(){return s},Ke:function(){return i}}),n(28538);var r=n(67294);let s=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],[t,n]=(0,r.useState)(e),s=()=>n(e=>!e);return{isOpened:t,setIsOpened:n,toggle:s}},i=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{isOpened:n,setIsOpened:i}=s(t),[o,a]=(0,r.useState)(e),l=t=>{i(t),!1===t&&a(e)};return[l,n,o,a]};var o=n(78776);let a=(e,t)=>{let n=(0,r.useRef)(null),s=(0,r.useMemo)(async()=>(0,o.BL)(e,t),[e,t]),i=(0,r.useCallback)(async()=>{if(n.current){let e=await s;e.disconnect(n.current)}},[s]);return(0,r.useEffect)(()=>{n.current&&(n.current.onload=async()=>{let e=await s;n.current&&e.connect(n.current)})},[s]),{iFrameRef:n,cleanup:i}};n(93886)},28538:function(e,t,n){"use strict";n.d(t,{N:function(){return a}});var r=n(18967),s=n(35887),i=n(34217);let o={IDLE:{iconLabel:"No iniciado",color:i.rS.palette.secondary.main,bgColor:"rgba(0, 0, 102, 0.1)",Icon:s.Z},STARTED:{iconLabel:"En progreso",color:i.rS.palette.warning.blackness,bgColor:"rgba(220, 104, 3, 0.2)",Icon:s.Z},COMPLETED:{iconLabel:"Finalizado",color:i.rS.palette.success.blackness,bgColor:"rgba(3, 152, 85, 0.1)",Icon:r.Z}},a=e=>o[e]},93886:function(e,t,n){"use strict";n.d(t,{G:function(){return s}});var r=n(67294);let s=e=>{let[t,n]=(0,r.useState)({loading:!1,data:{domain:"",title:"",description:"",url:"",images:[],duration:0},error:!1});return(0,r.useEffect)(()=>{let r=async()=>{n({...t,loading:!0});try{let r=await fetch("https://jsonlink.io/api/extract?url="+e,{keepalive:!0}),s=await r.json();return n({loading:!1,data:s,error:!1})}catch(i){n({...t,loading:!1,error:!0})}};e&&r()},[e]),{metaState:t}}},92729:function(e,t,n){"use strict";var r,s;n.d(t,{T:function(){return r}}),(s=r||(r={})).UNASSIGNED="UNASSIGNED",s.IN_REVIEW="IN_REVIEW",s.APPROVAL="APPROVAL",s.DISAPPROVAL="DISAPPROVAL"},18029:function(e,t,n){"use strict";var r,s;n.d(t,{m:function(){return r}}),(s=r||(r={})).STARTED="STARTED",s.IN_PROGRESS="IN_PROGRESS",s.COMPLETED="COMPLETED",s.IN_REVIEW="IN_REVIEW",s.APPROVED="APPROVED",s.DISAPPROVED="DISAPPROVED",s.IDLE="IDLE"},9467:function(e,t,n){"use strict";n.d(t,{OX:function(){return l},T9:function(){return d.T},aO:function(){return o},mh:function(){return c.m},mN:function(){return a},uU:function(){return u.u}});var r,s,i,o,a,l,u=n(86282),c=n(18029),d=n(92729);(r=o||(o={})).LESSON="LESSON",r.SECTION="SECTION",r.PROJECT="PROJECT",(s=a||(a={})).IDLE="IDLE",s.STARTED="STARTED",s.COMPLETED="COMPLETED",(i=l||(l={})).DELIVERY="DELIVERY",i.FEEDBACK="FEEDBACK",i.APPROVED="APPROVED",i.DISAPPROVED="DISAPPROVED"},86282:function(e,t,n){"use strict";var r,s;n.d(t,{u:function(){return r}}),(s=r||(r={})).TEACHER="TEACHER",s.STUDENT="STUDENT"},82694:function(e,t,n){"use strict";n.d(t,{c:function(){return i}});var r=n(64529),s=n(782);let i=(0,r.ZP)((0,s.tJ)(e=>({account:void 0,institutionSelected:void 0,clearStore:()=>e(()=>({account:void 0,institutionSelected:void 0})),clearAccount:()=>e(()=>({account:void 0})),setAccount:t=>e(e=>({...e,account:t})),selectInstitution:t=>e(e=>{var n,r;return{...e,institutionSelected:null===(n=e.account)||void 0===n?void 0:null===(r=n.institutions)||void 0===r?void 0:r.find(e=>e.id===t)}})}),{name:"account-storage"}))},83940:function(e,t,n){"use strict";n.d(t,{F:function(){return i}});var r=n(64529),s=n(782);let i=(0,r.ZP)((0,s.tJ)(e=>({settings:{layout:{sidebarOpen:!0,routes:[]}},setSettings:t=>e(e=>({...e,settings:t})),setRoutes:t=>e(e=>({...e,settings:{...e.settings,layout:{...e.settings.layout,routes:t}}}))}),{name:"settings-storage"}))},23040:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return $}});var r=n(85893),s=n(96471),i=n(93789),o=n(81138),a=n(72213),l=n(5152),u=n.n(l),c=n(9008),d=n.n(c),f=n(11163),m=n(67294),E=n(76248),S=n(20843),p=n(54666),v=n(56798),g=n(81719);let b=(0,g.ZP)(v.Z)(e=>{let{theme:t}=e;return{color:t.palette.tone.white,width:"2.5rem",height:"2.5rem",backgroundColor:t.palette.secondary.main,"&.MuiButton-root":{minHeight:"2rem",minWidth:"2rem"},"&:hover":{backgroundColor:t.palette.secondary.main}}});var h=n(71263),P=n(64773),y=n(7297),I=n(26997),T=n(30358);function C(){let e=(0,y.Z)(["\n  query lesson($id: String!) {\n    lesson(id: $id) {\n      id\n      title\n      course_id\n      asset {\n        id\n        title\n        url\n      }\n      rise_lesson_id\n      lesson_order\n    }\n  }\n"]);return C=function(){return e},e}let D=(0,I.Ps)(C()),R=e=>{let[t]=(0,T.aM)({query:D,variables:{id:e},pause:!e}),{lesson:n}=(null==t?void 0:t.data)||{};return{lesson:n,isLoading:null==t?void 0:t.fetching,error:null==t?void 0:t.error}};function x(){let e=(0,y.Z)(["\n  query progresses($enrollmentId: String!) {\n    progresses(enrollmentId: $enrollmentId) {\n      id\n      enrollment_id\n      lesson_id\n      rise_lesson_id\n      status\n      created_at\n      completed_at\n    }\n  }\n"]);return x=function(){return e},e}let Z=(0,I.Ps)(x());function _(){let e=(0,y.Z)(["\n  mutation createStatement($statement: CreateStatement!) {\n    createStatement(statement: $statement)\n  }\n"]);return _=function(){return e},e}let O=(0,I.Ps)(_()),A=()=>{let[{data:e,fetching:t,error:n},r]=(0,T.Db)(O),s=(0,m.useCallback)(async e=>{await r(e)},[r]);return{statementCreated:null==e?void 0:e.createStatement,isLoading:t,error:n,createStatement:s}};function N(){let e=(0,y.Z)(["\n  mutation createState($state: CreateState!) {\n    createState(state: $state)\n  }\n"]);return N=function(){return e},e}let L=(0,I.Ps)(N()),j=()=>{let[{data:e,fetching:t,error:n},r]=(0,T.Db)(L),s=(0,m.useCallback)(async e=>{await r(e)},[r]);return{stateCreated:null==e?void 0:e.createState,isLoading:t,error:n,createState:s}};function k(){let e=(0,y.Z)(["\n  query stateContent($state: GetStateContent!) {\n    stateContent(state: $state) {\n      bookmark {\n        id\n        contents\n      }\n      suspend_data {\n        id\n        contents\n      }\n      cumulative_time {\n        id\n        contents\n      }\n    }\n  }\n"]);return k=function(){return e},e}let w=(0,I.Ps)(k()),V=e=>{let{stateId:t,activityId:n,agent:r,registration:s}=e,[{data:i,fetching:o,error:a}]=(0,T.aM)({query:w,variables:{state:{stateId:t,activityId:n,agent:r,registration:s}}}),{stateContent:l}=i||{};return{stateContent:l,isLoading:o,error:a}},M=e=>{let[t,n]=(0,m.useState)(),[r,s]=(0,T.aM)({...e,variables:t,pause:!0});(0,m.useEffect)(()=>{t&&s()},[s,t]);let i=(0,m.useCallback)(e=>{n(e)},[]);return[r,i]};var U=n(82694),q=n(83940),J=n(34155);let F=u()(()=>n.e(3338).then(n.bind(n,33338)),{loadableGenerated:{webpack:()=>[33338]},ssr:!1,suspense:!1}),G=()=>{let e=(0,f.useRouter)(),{lessonId:t,enrollmentId:n}=e.query,{accountId:l}=(0,U.c)(e=>{var t;return{accountId:null===(t=e.account)||void 0===t?void 0:t.id}},E.Z),u=(0,q.F)(e=>e,E.Z),[c,v]=M({query:Z,requestPolicy:"network-only"}),{createStatement:g}=A(),{createState:y}=j(),{lesson:I,isLoading:T,error:C}=R(t),{stateContent:D,isLoading:x,error:_}=V({activityId:J.env.NEXT_PUBLIC_STATE_CONTENT_ACTIVITY_ID||"",registration:n,stateId:"state",agent:encodeURIComponent(JSON.stringify({account:{name:l,homePage:J.env.NEXT_PUBLIC_STATE_CONTENT_HOMEPAGE}}))}),O=null==I?void 0:I.rise_lesson_id,{title:N,url:L}=(null==I?void 0:I.asset)||{},k=(0,m.useMemo)(()=>({async processStatement(e){let t=e.asJson(),{objectType:r,...s}=t;g({statement:s}),v({enrollmentId:n}),h.Z.info("Statement:",JSON.stringify(t))},async processState(e){let t=e.asJson();y({state:t}),v({enrollmentId:n}),h.Z.info("State:",JSON.stringify(t))}}),[g,v,n,y]),w=(0,m.useMemo)(()=>({objectId:"http://adlnet.gov/expapi/activities/lesson",registration:n,account:{username:l||""},initialStateSupplier:async e=>e.setContent({...D,bookmark:{id:"bookmark",contents:"#/lessons/".concat(O)}})}),[l,n,O,D]),{iFrameRef:G}=(0,P.Pg)(k,w),$=(0,m.useCallback)(()=>{e.back()},[e]);return((0,m.useEffect)(()=>{u.setSettings({layout:{...u.settings.layout,sidebarOpen:!1}})},[]),T||x)?(0,r.jsx)(S.Layout,{children:(0,r.jsx)(p.Z,{})}):C||_?(0,r.jsx)(S.Layout,{children:(0,r.jsx)(F,{})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(d(),{children:[(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"}),(0,r.jsx)("meta",{name:"viewport",content:"initial-scale=1, width=device-width"}),(0,r.jsx)("title",{children:"".concat(N)||"Academy"})]}),(0,r.jsxs)(S.Layout,{children:[(0,r.jsx)(i.Z,{padding:"1.5rem",display:"flex",flexDirection:"column",children:(0,r.jsxs)(i.Z,{display:"flex",alignItems:"center",gap:1,children:[(0,r.jsx)(b,{onClick:$,"aria-label":"back",children:(0,r.jsx)(s.Z,{fontSize:"small"})}),(0,r.jsx)(o.Z,{variant:"h1",fontSize:"1.5rem",fontWeight:"600",children:N})]})}),(0,r.jsx)(i.Z,{display:"flex",flex:"1",children:(0,r.jsx)(a.Z,{id:"iframesito",component:"iframe","aria-label":N,role:"presentation",title:N,src:"".concat(L,"?track"),ref:G,style:{border:"none",overflowY:"hidden"},allowFullScreen:!0})})]})]})};var $=G}},function(e){e.O(0,[5700,9870,7138,3851,6505,358,9916,4771,4217,9774,2888,179],function(){return e(e.s=66624)}),_N_E=e.O()}]);
//# sourceMappingURL=[lessonId]-dff85ec4f6f204cb.js.map